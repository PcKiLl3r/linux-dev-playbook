---
- name: Remove old versions of neovim
  file:
    path: "{{ home }}/neovim"
    state: absent

- name: Clone neovim
  git:
    repo: https://github.com/neovim/neovim.git
    dest: "{{ home }}/neovim"
    depth: 1
    version: stable

- name: Install NeoVim Dependencies
  dnf:
    name:
      - cmake
      - gettext
      - lua5.1
      - liblua5.1-0-dev

- name: Plenary
  git:
    repo: "https://github.com/nvim-lua/plenary.nvim.git"
    dest: "{{ personal }}/plenary.nvim"
    depth: 1

- name: Install NeoVim with Make
  command: sudo make install
  args: 
    chdir: "{{ home }}/neovim"

- name: Install Rust
  shell:
    cmd: curl --proto '=https' --tlsv1.2 -sSf https://sh.rust.rs | sh

- name: Install Stylua
  shell:
    cmd: cargo install stylua

- name: Install LuaRocks
  shell:
    chdir: "{{ dev }}"
    cmd: ./resources/luarocks

- name: Install LuaCheck
  shell:
    cmd: luarocks install luacheck
